# å›¾å® (Tupal) - AI å°çº¢ä¹¦å›¾æ–‡ç”Ÿæˆå™¨

<p align="center">
  <img src="frontend/public/logo.svg" alt="å›¾å® Logo" width="120" height="120">
</p>

<p align="center">
  <strong>ğŸ¨ ä¸€ç«™å¼ AI é©±åŠ¨çš„å°çº¢ä¹¦å†…å®¹åˆ›ä½œå¹³å°</strong>
</p>

<p align="center">
  <a href="#åŠŸèƒ½ç‰¹æ€§">åŠŸèƒ½ç‰¹æ€§</a> â€¢
  <a href="#å¿«é€Ÿå¼€å§‹">å¿«é€Ÿå¼€å§‹</a> â€¢
  <a href="#æŠ€æœ¯æ¶æ„">æŠ€æœ¯æ¶æ„</a> â€¢
  <a href="#api-æ–‡æ¡£">API æ–‡æ¡£</a> â€¢
  <a href="#å¼€å‘æŒ‡å—">å¼€å‘æŒ‡å—</a>
</p>

---

## ğŸ“– é¡¹ç›®ç®€ä»‹

**å›¾å® (Tupal)** æ˜¯ä¸€æ¬¾ä¸“ä¸ºå°çº¢ä¹¦å†…å®¹åˆ›ä½œè€…è®¾è®¡çš„ AI å›¾æ–‡ç”Ÿæˆå·¥å…·ã€‚é€šè¿‡æ•´åˆå¤šç§ AI èƒ½åŠ›ï¼Œå¸®åŠ©ç”¨æˆ·å¿«é€Ÿç”Ÿæˆé«˜è´¨é‡çš„å°çº¢ä¹¦å›¾æ–‡å†…å®¹ï¼ŒåŒ…æ‹¬æ–‡æ¡ˆå¤§çº²ã€é…å›¾ç”Ÿæˆã€çƒ­ç‚¹è¿½è¸ªç­‰åŠŸèƒ½ã€‚

### ğŸ¯ æ ¸å¿ƒä»·å€¼

- **æ•ˆç‡æå‡**: å°†å†…å®¹åˆ›ä½œæ—¶é—´ä»æ•°å°æ—¶ç¼©çŸ­åˆ°å‡ åˆ†é’Ÿ
- **è´¨é‡ä¿è¯**: AI é©±åŠ¨çš„å†…å®¹ç”Ÿæˆï¼Œç¡®ä¿ä¸“ä¸šæ°´å‡†
- **çµæ„Ÿæ¿€å‘**: å®æ—¶çƒ­æ¦œè¿½è¸ªï¼Œç´§è·Ÿçƒ­ç‚¹è¯é¢˜
- **ç´ æç®¡ç†**: ç»Ÿä¸€ç®¡ç†åˆ›ä½œç´ æï¼Œéšæ—¶è°ƒç”¨

---

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸ–¼ï¸ å›¾æ–‡ç”Ÿæˆ
- **æ™ºèƒ½å¤§çº²ç”Ÿæˆ**: åŸºäºä¸»é¢˜è‡ªåŠ¨ç”Ÿæˆç»“æ„åŒ–å†…å®¹å¤§çº²
- **æ‰¹é‡å›¾ç‰‡ç”Ÿæˆ**: æ”¯æŒå¹¶å‘ç”Ÿæˆå¤šå¼ é…å›¾ï¼Œå®æ—¶è¿›åº¦è¿½è¸ª
- **é£æ ¼å®šåˆ¶**: æ”¯æŒå¤šç§å›¾ç‰‡é£æ ¼å’Œå°ºå¯¸é…ç½®
- **å‚è€ƒå›¾æ”¯æŒ**: ä¸Šä¼ å‚è€ƒå›¾ç‰‡ï¼Œç”Ÿæˆé£æ ¼ä¸€è‡´çš„å†…å®¹

### ğŸ“Š çƒ­æ¦œè¿½è¸ª
- **å¤šå¹³å°èšåˆ**: æ”¯æŒå¾®åšã€çŸ¥ä¹ã€ç™¾åº¦ã€Bç«™ã€æŠ–éŸ³ã€å¤´æ¡ç­‰ 10+ å¹³å°
- **å®æ—¶æ›´æ–°**: 30 åˆ†é’Ÿè‡ªåŠ¨åˆ·æ–°ï¼Œç´§è·Ÿçƒ­ç‚¹
- **æ™ºèƒ½ç¼“å­˜**: ä¼˜åŒ–è¯·æ±‚æ€§èƒ½ï¼Œé™çº§ä¿æŠ¤

### ğŸ“¦ ç´ æç®¡ç†
- **å¤šç±»å‹æ”¯æŒ**: æ–‡æœ¬ã€å›¾ç‰‡ã€å‚è€ƒé“¾æ¥ç­‰å¤šç§ç´ æç±»å‹
- **æ ‡ç­¾åˆ†ç±»**: çµæ´»çš„æ ‡ç­¾ç³»ç»Ÿï¼Œå¿«é€Ÿæ£€ç´¢
- **@å¼•ç”¨**: åœ¨åˆ›ä½œä¸­é€šè¿‡ @mention å¿«é€Ÿå¼•ç”¨ç´ æ

### ğŸ“ æ¨¡æ¿ç³»ç»Ÿ
- **å‚æ•°åŒ–æ¨¡æ¿**: ä½¿ç”¨ `{{å ä½ç¬¦}}` åˆ›å»ºå¯å¤ç”¨æ¨¡æ¿
- **ç³»ç»Ÿæ¨¡æ¿**: å®˜æ–¹é¢„ç½®é«˜è´¨é‡æ¨¡æ¿
- **å†å²è½¬æ¨¡æ¿**: ä¸€é”®å°†æˆåŠŸä½œå“è½¬ä¸ºæ¨¡æ¿
- **ä½¿ç”¨ç»Ÿè®¡**: çƒ­é—¨æ¨¡æ¿æ¨è

### ğŸ”´ å°çº¢ä¹¦é›†æˆ
- **æ‰«ç ç™»å½•**: æ”¯æŒå°çº¢ä¹¦è´¦å·æ‰«ç ç™»å½•
- **å†…å®¹å‘å¸ƒ**: ç›´æ¥å‘å¸ƒåˆ°å°çº¢ä¹¦å¹³å°ï¼ˆå¼€å‘ä¸­ï¼‰

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- **Node.js**: >= 18.0.0
- **Python**: >= 3.9
- **npm** æˆ– **pnpm**

### å®‰è£…æ­¥éª¤

#### 1. å…‹éš†é¡¹ç›®

```bash
git clone https://github.com/your-username/tupal.git
cd tupal
```

#### 2. åç«¯è®¾ç½®

```bash
# è¿›å…¥åç«¯ç›®å½•
cd backend

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
# Windows
venv\Scripts\activate
# macOS/Linux
source venv/bin/activate

# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# å®‰è£… Playwright æµè§ˆå™¨ï¼ˆç”¨äºå°çº¢ä¹¦æ‰«ç ç™»å½•ï¼‰
playwright install chromium

# å¤åˆ¶ç¯å¢ƒå˜é‡é…ç½®
cp .env.example .env

# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„ API Key
```

#### 3. å‰ç«¯è®¾ç½®

```bash
# è¿›å…¥å‰ç«¯ç›®å½•
cd frontend

# å®‰è£…ä¾èµ–
npm install

# æˆ–ä½¿ç”¨ pnpm
pnpm install
```

#### 4. å¯åŠ¨æœåŠ¡

**å¯åŠ¨åç«¯æœåŠ¡:**

```bash
cd backend
python app.py
```

åç«¯æœåŠ¡å°†åœ¨ `http://localhost:5030` å¯åŠ¨

**å¯åŠ¨å‰ç«¯æœåŠ¡:**

```bash
cd frontend
npm run dev
```

å‰ç«¯æœåŠ¡å°†åœ¨ `http://localhost:5173` å¯åŠ¨

---

## âš™ï¸ ç¯å¢ƒé…ç½®

åœ¨ `backend/.env` æ–‡ä»¶ä¸­é…ç½®ä»¥ä¸‹ç¯å¢ƒå˜é‡ï¼š

```env
# Flask é…ç½®
SECRET_KEY=your-secret-key-here
FLASK_DEBUG=True
PORT=5030

# CORS é…ç½®
CORS_ORIGINS=http://localhost:5173,http://localhost:3000

# AI æœåŠ¡é…ç½®
OPENAI_API_KEY=your-openai-api-key
OPENAI_BASE_URL=https://api.openai.com/v1
OPENAI_MODEL=gpt-4

# å›¾ç‰‡ç”ŸæˆæœåŠ¡é…ç½®
IMAGE_API_KEY=your-image-api-key
IMAGE_API_URL=https://api.example.com/generate
IMAGE_MODEL=dall-e-3

# å¹¶å‘é…ç½®
MAX_CONCURRENT_GENERATIONS=25

# çƒ­æ¦œæŠ“å–é…ç½®
TRENDING_CACHE_TTL=1800
TRENDING_REQUEST_TIMEOUT=5

# å°çº¢ä¹¦é…ç½®ï¼ˆå¯é€‰ï¼‰
XHS_COOKIE=your-xiaohongshu-cookie
```

---

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Frontend                              â”‚
â”‚                   Vue 3 + TypeScript + Vite                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                         API Layer                            â”‚
â”‚                    Flask RESTful API                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      Service Layer                           â”‚
â”‚    OutlineService â”‚ ImageService â”‚ TemplateService â”‚ ...    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                     Generator Layer                          â”‚
â”‚         Clients â†’ Generators â†’ Prompts (ä¸‰å±‚æ¶æ„)            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      Storage Layer                           â”‚
â”‚              JSON File Storage / Future: Database            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æŠ€æœ¯æ ˆ

#### å‰ç«¯
| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| Vue.js | 3.3.x | å‰ç«¯æ¡†æ¶ |
| TypeScript | 5.3.x | ç±»å‹å®‰å…¨ |
| Vite | 5.0.x | æ„å»ºå·¥å…· |
| Pinia | 2.1.x | çŠ¶æ€ç®¡ç† |
| Vue Router | 4.2.x | è·¯ç”±ç®¡ç† |
| Axios | 1.6.x | HTTP å®¢æˆ·ç«¯ |
| Lucide Vue | 0.555.x | å›¾æ ‡åº“ |

#### åç«¯
| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| Flask | 3.0.x | Web æ¡†æ¶ |
| Flask-CORS | 4.0.x | è·¨åŸŸæ”¯æŒ |
| OpenAI | 2.8.x | AI æ–‡æœ¬ç”Ÿæˆ |
| Pillow | 10.1.x | å›¾ç‰‡å¤„ç† |
| Playwright | 1.40.x | æµè§ˆå™¨è‡ªåŠ¨åŒ– |
| BeautifulSoup4 | 4.12.x | ç½‘é¡µè§£æ |
| Gevent | 23.9.x | å¼‚æ­¥æ”¯æŒ |

### ç›®å½•ç»“æ„

```
tupal/
â”œâ”€â”€ backend/                    # åç«¯æœåŠ¡
â”‚   â”œâ”€â”€ app.py                 # Flask ä¸»åº”ç”¨
â”‚   â”œâ”€â”€ config.py              # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ requirements.txt       # Python ä¾èµ–
â”‚   â”œâ”€â”€ api/                   # API è·¯ç”±å±‚
â”‚   â”‚   â”œâ”€â”€ routes/           # åŠŸèƒ½åŸŸè·¯ç”±
â”‚   â”‚   â””â”€â”€ utils/            # API å·¥å…·
â”‚   â”œâ”€â”€ services/             # æœåŠ¡å±‚
â”‚   â”œâ”€â”€ generators/           # AI ç”Ÿæˆå™¨å±‚
â”‚   â”‚   â”œâ”€â”€ clients/         # API å®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ generators/      # ç”Ÿæˆå™¨å®ç°
â”‚   â”‚   â””â”€â”€ prompts/         # æç¤ºè¯æ¨¡æ¿
â”‚   â”œâ”€â”€ models/              # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ storage/             # å­˜å‚¨å±‚
â”‚   â”œâ”€â”€ sources/             # çƒ­æ¦œæ•°æ®æº
â”‚   â””â”€â”€ utils/               # å·¥å…·å‡½æ•°
â”‚
â”œâ”€â”€ frontend/                  # å‰ç«¯åº”ç”¨
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/      # Vue ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ views/           # é¡µé¢è§†å›¾
â”‚   â”‚   â”œâ”€â”€ services/        # API æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ store/           # Pinia çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ router/          # è·¯ç”±é…ç½®
â”‚   â”‚   â””â”€â”€ styles/          # æ ·å¼æ–‡ä»¶
â”‚   â”œâ”€â”€ public/              # é™æ€èµ„æº
â”‚   â””â”€â”€ package.json
â”‚
â””â”€â”€ doc/                       # é¡¹ç›®æ–‡æ¡£
    â””â”€â”€ åç«¯æ¶æ„è¯´æ˜.md
```

---

## ğŸ“š API æ–‡æ¡£

### åŸºç¡€ä¿¡æ¯

- **Base URL**: `http://localhost:5030/api`
- **å“åº”æ ¼å¼**: JSON
- **ç»Ÿä¸€å“åº”ç»“æ„**:

```json
{
  "success": true,
  "data": { ... },
  "message": "æ“ä½œæˆåŠŸ"
}
```

### ä¸»è¦æ¥å£

#### å¤§çº²ç”Ÿæˆ

```http
POST /api/generate-outline
Content-Type: application/json

{
  "topic": "å¦‚ä½•å­¦ä¹  Python",
  "style": "æ•™ç¨‹",
  "page_count": 5
}
```

#### å›¾ç‰‡ç”Ÿæˆ

```http
POST /api/generate-images
Content-Type: application/json

{
  "prompts": ["å¯çˆ±çš„çŒ«å’ª", "ç¾ä¸½çš„é£æ™¯"],
  "width": 1080,
  "height": 1440,
  "style": "æ’ç”»é£æ ¼"
}
```

#### è·å–ç”Ÿæˆè¿›åº¦

```http
GET /api/progress/{task_id}
```

#### çƒ­æ¦œæ•°æ®

```http
GET /api/trending
GET /api/trending/{source_id}
```

#### ç´ æç®¡ç†

```http
GET /api/materials
POST /api/materials
PUT /api/materials/{id}
DELETE /api/materials/{id}
```

#### æ¨¡æ¿ç®¡ç†

```http
GET /api/templates
POST /api/templates
GET /api/templates/{id}
PUT /api/templates/{id}
DELETE /api/templates/{id}
POST /api/templates/{id}/use
GET /api/templates/popular
```

#### å†å²è®°å½•

```http
GET /api/history
POST /api/history
DELETE /api/history/{id}
```

---

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°çš„ API ç«¯ç‚¹

1. åœ¨ `backend/api/routes/` ä¸­åˆ›å»ºæˆ–ä¿®æ”¹è·¯ç”±æ–‡ä»¶
2. ä½¿ç”¨ç»Ÿä¸€å“åº”æ ¼å¼ï¼š

```python
from ..utils.response import success_response, error_response

@bp.route('/new-endpoint', methods=['POST'])
def new_endpoint():
    try:
        result = service.do_something()
        return success_response(result)
    except Exception as e:
        return error_response(str(e), 500)
```

3. åœ¨ `api/routes/__init__.py` ä¸­å¯¼å‡ºè“å›¾
4. åœ¨ `app.py` ä¸­æ³¨å†Œè“å›¾

### æ·»åŠ æ–°çš„ AI ç”Ÿæˆå™¨

1. åœ¨ `generators/clients/` ä¸­åˆ›å»º API å®¢æˆ·ç«¯
2. åœ¨ `generators/generators/` ä¸­åˆ›å»ºç”Ÿæˆå™¨ç±»
3. åœ¨ `generators/factory.py` ä¸­æ³¨å†Œ

### ä»£ç è§„èŒƒ

- **Python**: éµå¾ª PEP 8 è§„èŒƒ
- **TypeScript**: ä½¿ç”¨ ESLint + Prettier
- **æäº¤ä¿¡æ¯**: ä½¿ç”¨è¯­ä¹‰åŒ–æäº¤ä¿¡æ¯

---

## ğŸ”§ å¸¸è§é—®é¢˜

### Q: å›¾ç‰‡ç”Ÿæˆå¤±è´¥æ€ä¹ˆåŠï¼Ÿ

A: è¯·æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
1. ç¡®è®¤ `IMAGE_API_KEY` é…ç½®æ­£ç¡®
2. æ£€æŸ¥ç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸
3. æŸ¥çœ‹åç«¯æ—¥å¿—è·å–è¯¦ç»†é”™è¯¯ä¿¡æ¯

### Q: çƒ­æ¦œæ•°æ®æ— æ³•è·å–ï¼Ÿ

A: å¯èƒ½åŸå› ï¼š
1. ç½‘ç»œé—®é¢˜å¯¼è‡´æŠ“å–å¤±è´¥
2. ç›®æ ‡ç½‘ç«™åçˆ¬ç­–ç•¥æ›´æ–°
3. å¯é…ç½®ä»£ç† `TRENDING_PROXY` è§£å†³

### Q: å°çº¢ä¹¦ç™»å½•å¤±è´¥ï¼Ÿ

A: è¯·ç¡®ä¿ï¼š
1. å·²å®‰è£… Playwright æµè§ˆå™¨ï¼š`playwright install chromium`
2. Cookie é…ç½®æ­£ç¡®ï¼ˆå¦‚ä½¿ç”¨ Cookie æ–¹å¼ï¼‰

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT License](LICENSE) å¼€æºè®¸å¯è¯ã€‚

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ï¼š`git checkout -b feature/amazing-feature`
3. æäº¤æ›´æ”¹ï¼š`git commit -m 'Add amazing feature'`
4. æ¨é€åˆ†æ”¯ï¼š`git push origin feature/amazing-feature`
5. æäº¤ Pull Request
